/*!
 * jquery-include.js
 * -----------------
 * Include remote file to web page.
 * @version 0.1.0
 * @license MIT
 * @author mach3 <http://github.com/mach3>
 * @url https://github.com/mach3/jquery-include.js
 */
!function(a){a.include={EVENT_READY:"includeready",doc:a(document),_ready:!1,init:function(){var b,c,d;b=this,c=a("[data-include]"),d=c.length,c.each(function(){b.include(this).done(function(){--d||(b._ready=!0,b.doc.trigger(b.EVENT_READY))})})},ready:function(a){return this._ready?a():void this.doc.on(this.EVENT_READY,a)},findFunction:function(b){var c=window;return b?(a.each(b.split("."),function(a,b){return b in c?void(c=c[b]):(c=null,!1)}),a.isFunction(c)?c:null):null},include:function(b){var c,d;b=a(b),c=this,d=b.data(),d.el=b,d.replace=""===d.includeReplace?!0:d.includeReplace,d.render=this.findFunction(d.includeRender),d.ready=this.findFunction(d.includeReady),d.dfd=a.Deferred();try{d.node=a(d.include),d.node.length&&this.render(d.node.html(),d)}catch(e){a.ajax({url:d.include}).done(function(a){c.render(a,d)})}return d.dfd.promise()},process:function(b,c){var d=a.Deferred();return b=c.render?c.render(b):b,b&&(a.isFunction(b.done)?b.done(function(a){d.resolve(a)}):d.resolve(b)),d.promise()},render:function(b,c){this.process(b,c).done(function(b){var d;c.replace?(d=a("<div>").append(b).children().insertBefore(c.el),c.el.remove()):d=c.el.append(b),c.ready&&c.ready(d),c.dfd.resolve()})}},a(function(){a.include.init()})}(jQuery);